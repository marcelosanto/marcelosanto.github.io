<!DOCTYPE html>
<html lang="pt-br" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projeto Solidarize: Uma Exploração Interativa</title>
    <!-- Chosen Palette: Tech & Trust -->
    <!-- Application Structure Plan: A aplicação foi desenhada como uma narrativa vertical guiada por "scrollytelling". O objetivo é transformar a arquitetura técnica, que é complexa, numa história visual e fácil de entender. A estrutura começa com o "porquê" (o problema e a solução), avança para o "como" com uma exploração interativa e animada da arquitetura (a peça central da página), aprofunda os detalhes da IA com separadores interativos e conclui com o impacto. Esta abordagem foi escolhida para envolver ativamente o utilizador, tornando os conceitos abstratos em algo tangível e memorável, em vez de apresentar um diagrama estático. -->
    <!-- Visualization & Content Choices: 
        - Arquitetura Interativa: (Meta: Organizar/Explicar Processo) -> Viz: Diagrama de Fluxo com Animação (HTML/CSS/JS). Justificativa: É a forma mais eficaz de explicar um fluxo complexo passo a passo, mostrando as conexões e o papel de cada serviço dinamicamente, sem usar SVG/Mermaid.js.
        - Detalhes da IA: (Meta: Organizar/Informar) -> Viz: Abas (Tabs) Interativas (HTML/CSS/JS). Justificativa: Permite ao utilizador explorar detalhadamente cada componente de IA (LLMs, Agentes, Visão) ao seu próprio ritmo, sem sobrecarregar a página com informação.
        - Pilares do Projeto: (Meta: Informar) -> Viz: Cards com animação de entrada (HTML/Tailwind/JS). Justificativa: Apresenta os conceitos chave de forma visualmente apelativa e segmentada, com um toque dinâmico.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F8F9FA; }
        .tech-bg-dark { background-color: #0B2D48; }
        .tech-bg-medium { background-color: #124B73; }
        .tech-bg-light { background-color: #2283C3; }
        .tech-accent { color: #55B3F2; }
        .tech-accent-bg { background-color: #55B3F2; }
        .tech-text-dark { color: #0B2D48; }
        .tech-text-medium { color: #124B73; }
        .tech-text-light { color: #2283C3; }
        .tech-border-accent { border-color: #55B3F2; }
        
        .sticky-nav { position: sticky; top: 0; z-index: 50; }
        .nav-link.active { color: #55B3F2; font-weight: 700; }

        .diagram-node {
            border: 2px solid #A2D6F9;
            background-color: white;
            transition: all 0.5s ease-in-out;
            opacity: 0.5;
            cursor: pointer;
        }
        .diagram-node.active {
            border-color: #55B3F2;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(85, 179, 242, 0.5);
            opacity: 1;
        }

        #data-pulse {
            position: absolute;
            width: 16px;
            height: 16px;
            background-color: #55B3F2;
            border-radius: 50%;
            box-shadow: 0 0 10px #55B3F2, 0 0 20px #55B3F2;
            z-index: 10;
            opacity: 0;
            transition: top 1s ease-in-out, left 1s ease-in-out, opacity 0.3s;
        }

        .explanation-box {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            display: none;
        }
        .explanation-box.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-section { animation: fadeIn 0.8s ease-out forwards; }
        @keyframes fadeInModal { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideInModal { from { transform: translateY(-30px); } to { transform: translateY(0); } }
        .modal-fade-in { animation: fadeInModal 0.3s ease-out; }
        .modal-slide-in { animation: slideInModal 0.3s ease-out; }

        .tab-button.active { background-color: #55B3F2; color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body class="text-tech-text-dark">

    <header id="inicio" class="tech-bg-dark text-white text-center py-24 px-6">
        <h1 class="text-5xl md:text-6xl font-black mb-4">Projeto Solidarize</h1>
        <p class="text-xl max-w-3xl mx-auto text-gray-300">Uma Exploração Interativa da Nossa Arquitetura de Impacto Social</p>
    </header>

    <nav id="navbar" class="sticky-nav tech-bg-dark bg-opacity-90 backdrop-blur-sm shadow-lg">
        <div class="container mx-auto flex justify-center py-3 px-6 space-x-6 md:space-x-8 text-white">
            <a href="#solucao" class="nav-link transition-colors duration-300 hover:text-tech-accent">A Solução</a>
            <a href="#jornada" class="nav-link transition-colors duration-300 hover:text-tech-accent">A Jornada</a>
            <a href="#arquitetura" class="nav-link transition-colors duration-300 hover:text-tech-accent">Arquitetura</a>
            <a href="#ia" class="nav-link transition-colors duration-300 hover:text-tech-accent">Nossa IA</a>
            <a href="#impacto" class="nav-link transition-colors duration-300 hover:text-tech-accent">Impacto</a>
        </div>
    </nav>

    <main class="container mx-auto px-6 py-16">

        <section id="solucao" class="scroll-mt-24 mb-24 text-center">
            <h2 class="text-4xl font-bold tech-text-medium mb-4">O Problema e a Nossa Solução</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-12">A solidariedade precisa de tecnologia para ser eficaz. Construímos uma plataforma que transforma boa vontade em ação organizada, segura e escalável através de pilares fundamentais.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="solution-card bg-white p-8 rounded-xl shadow-lg border-t-4 tech-border-accent">
                    <h3 class="text-2xl font-bold tech-text-dark mb-3">Segurança Primeiro</h3>
                    <p>Verificação de identidade com IA e processos robustos para garantir a segurança de voluntários e instituições.</p>
                </div>
                <div class="solution-card bg-white p-8 rounded-xl shadow-lg border-t-4 tech-border-accent">
                    <h3 class="text-2xl font-bold tech-text-dark mb-3">Conexões Inteligentes</h3>
                    <p>Utilizamos LLMs para entender o contexto e fazer o "match" perfeito entre as habilidades do voluntário e as necessidades da missão.</p>
                </div>
                <div class="solution-card bg-white p-8 rounded-xl shadow-lg border-t-4 tech-border-accent">
                    <h3 class="text-2xl font-bold tech-text-dark mb-3">Sustentabilidade</h3>
                    <p>Uma arquitetura 100% Serverless que minimiza custos e permite que a plataforma cresça de forma orgânica e financeiramente saudável.</p>
                </div>
            </div>
        </section>

        <section id="jornada" class="scroll-mt-24 mb-24 text-center">
            <h2 class="text-4xl font-bold tech-text-medium mb-4">A Nossa Jornada: A Evolução do Solidarize</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-12">O Solidarize não nasceu como é hoje. A nossa tecnologia evoluiu para superar desafios e maximizar o nosso impacto. Esta é a nossa história.</p>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 text-left">
                <div class="journey-card bg-white p-8 rounded-xl shadow-lg flex flex-col">
                    <div class="flex-grow">
                        <p class="font-bold tech-accent">FASE 1</p>
                        <h3 class="text-2xl font-bold tech-text-dark mb-3">O Começo Idealista</h3>
                        <p class="text-gray-600">Começámos com uma grande ideia, mas com uma arquitetura tradicional. Usávamos servidores que ficavam ligados 24/7, o que gerava custos fixos altos, mesmo com poucos utilizadores. Escalar para campanhas era um processo manual e complexo, e o nosso orçamento era consumido pela infraestrutura, não pela inovação.</p>
                    </div>
                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <p class="font-semibold text-red-600">❌ Desafio: Custos elevados e baixa escalabilidade.</p>
                    </div>
                </div>
                <div class="journey-card bg-white p-8 rounded-xl shadow-lg flex flex-col">
                    <div class="flex-grow">
                        <p class="font-bold tech-accent">FASE 2</p>
                        <h3 class="text-2xl font-bold tech-text-dark mb-3">A Virada Tecnológica</h3>
                        <p class="text-gray-600">A grande mudança foi a adoção de uma arquitetura <strong>Serverless</strong>. Migrámos para serviços como AWS Lambda e DynamoDB. O resultado foi imediato: os nossos custos caíram drasticamente, pois passámos a pagar apenas pelo que usávamos. A plataforma começou a escalar automaticamente e a nossa equipa pôde focar-se em criar funcionalidades em vez de gerir servidores.</p>
                    </div>
                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <p class="font-semibold text-green-600">✅ Ganho: Eficiência de custos e escalabilidade automática.</p>
                    </div>
                </div>
                <div class="journey-card bg-white p-8 rounded-xl shadow-lg flex flex-col">
                    <div class="flex-grow">
                        <p class="font-bold tech-accent">FASE 3</p>
                        <h3 class="text-2xl font-bold tech-text-dark mb-3">A Era da Inteligência</h3>
                        <p class="text-gray-600">Com uma base sólida e económica, demos o passo seguinte: integrámos a <strong>Inteligência Artificial</strong>. Com AWS Rekognition, automatizámos a verificação de identidade. Com AWS Bedrock (LLMs), tornámos as conexões mais inteligentes e o feedback mais acionável. O Solidarize transformou-se numa plataforma não apenas eficiente, mas verdadeiramente inteligente.</p>
                    </div>
                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <p class="font-semibold text-blue-600">✨ Resultado: Segurança, inteligência e impacto maximizados.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="arquitetura" class="scroll-mt-24 mb-24">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold tech-text-medium mb-4">Arquitetura Interativa</h2>
                <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-8">Agora que conhece a nossa jornada, explore em detalhe a nossa arquitetura atual. Clique no botão para iniciar a animação automática e clique em cada tecnologia para saber mais.</p>
                <button id="start-animation-btn" class="tech-accent-bg text-white font-bold py-3 px-8 rounded-lg text-xl shadow-md hover:bg-tech-bg-light transition-colors duration-300">▶ Iniciar Animação</button>
            </div>

            <div class="bg-white p-4 md:p-8 rounded-xl shadow-2xl flex flex-col gap-8 items-center">
                <div class="w-full min-h-[600px] overflow-x-auto">
                    <div id="diagram-container" class="relative w-[1200px] h-[700px] scale-90 md:scale-100 mx-auto">
                        <!-- Nodes -->
                        <div id="node-user" class="diagram-node absolute w-40 text-center p-4 rounded-lg" style="left: 20px; top: 310px;">👤<br>Utilizador</div>
                        <div id="node-cloudfront" class="diagram-node absolute w-40 text-center p-4 rounded-lg" style="left: 220px; top: 310px;">☁️<br>CloudFront</div>
                        <div id="node-api" class="diagram-node absolute w-40 text-center p-4 rounded-lg" style="left: 420px; top: 310px;">🔗<br>API Gateway</div>
                        <div id="node-cognito" class="diagram-node absolute w-40 text-center p-4 rounded-lg" style="left: 420px; top: 100px;">🔐<br>Cognito</div>
                        <div id="node-logic-main" class="diagram-node absolute w-52 text-center p-4 rounded-lg bg-gray-100 border-gray-400" style="left: 620px; top: 190px; height: 320px; opacity: 1;">Orquestração<br>(Agentes de IA)</div>
                            <div id="node-lambda" class="diagram-node absolute w-40 text-center p-2 rounded-lg" style="left: 650px; top: 220px;">λ<br>Lambda</div>
                            <div id="node-step" class="diagram-node absolute w-40 text-center p-2 rounded-lg" style="left: 650px; top: 290px;">⚙️<br>Step Functions</div>
                            <div id="node-event" class="diagram-node absolute w-40 text-center p-2 rounded-lg" style="left: 650px; top: 360px;">🗓️<br>EventBridge</div>
                            <div id="node-sns" class="diagram-node absolute w-40 text-center p-2 rounded-lg" style="left: 650px; top: 430px;">🔔<br>SNS</div>
                        <div id="node-rekognition" class="diagram-node absolute w-40 text-center p-4 rounded-lg" style="left: 880px; top: 100px;">👁️<br>Rekognition</div>
                        <div id="node-bedrock" class="diagram-node absolute w-40 text-center p-4 rounded-lg" style="left: 880px; top: 240px;">🧠<br>Bedrock (LLM)</div>
                        <div id="node-external" class="diagram-node absolute w-40 text-center p-4 rounded-lg" style="left: 880px; top: 380px;">🌍<br>APIs Externas</div>
                        <div id="node-db" class="diagram-node absolute w-40 text-center p-4 rounded-lg" style="left: 880px; top: 520px;">🗃️<br>DynamoDB / S3</div>

                        <!-- Data Pulse Element -->
                        <div id="data-pulse"></div>
                    </div>
                </div>
                 <div id="explanation-container" class="w-full p-4 bg-gray-50 rounded-lg border min-h-[120px]">
                    <div id="exp-0" class="explanation-box active"><p class="font-bold tech-text-medium text-lg">Bem-vindo à nossa arquitetura!</p><p>Clique em "Iniciar Animação" para ver a magia acontecer. Acompanhe a jornada de uma requisição e entenda o papel de cada serviço.</p></div>
                    <div id="exp-1" class="explanation-box"><p class="font-bold tech-text-medium">Passo 1: O Ponto de Partida</p><p>Tudo começa com o <strong>Utilizador</strong>. A requisição é enviada para o <strong>CloudFront</strong>, que entrega a interface da aplicação de forma rápida e segura.</p></div>
                    <div id="exp-2" class="explanation-box"><p class="font-bold tech-text-medium">Passo 2: A Porta de Entrada</p><p>As chamadas dinâmicas são direcionadas para o <strong>API Gateway</strong>, a porta de entrada segura e escalável para o nosso backend.</p></div>
                    <div id="exp-3" class="explanation-box"><p class="font-bold tech-text-medium">Passo 3: Verificação de Identidade</p><p>O API Gateway comunica com o <strong>Cognito</strong> para autenticar o utilizador, garantindo que apenas utilizadores autorizados prossigam.</p></div>
                    <div id="exp-4" class="explanation-box"><p class="font-bold tech-text-medium">Passo 4: Orquestração da Lógica</p><p>A requisição invoca os nossos "Agentes de IA", que são os fluxos do <strong>Step Functions</strong>. Eles coordenam as <strong>Funções Lambda</strong> que executam a lógica de negócio específica.</p></div>
                    <div id="exp-5" class="explanation-box"><p class="font-bold tech-text-medium">Passo 5: Análise com IA</p><p>A nossa lógica aciona as IAs: <strong>Rekognition</strong> para validar documentos e <strong>AWS Bedrock</strong> para usar LLMs em análises e decisões. O <strong>EventBridge</strong> pode acionar estes fluxos de forma agendada.</p></div>
                    <div id="exp-6" class="explanation-box"><p class="font-bold tech-text-medium">Passo 6: Interação e Notificação</p><p>O sistema pode comunicar com <strong>APIs Externas</strong> para verificações e pagamentos. O <strong>SNS</strong> é usado para enviar notificações (email, SMS) aos utilizadores.</p></div>
                    <div id="exp-7" class="explanation-box"><p class="font-bold tech-text-medium">Passo 7: Persistência dos Dados</p><p>Finalmente, todas as informações são guardadas de forma segura no <strong>DynamoDB</strong> (dados) e no <strong>Amazon S3</strong> (ficheiros).</p></div>
                </div>
            </div>
        </section>

        <section id="ia" class="scroll-mt-24 mb-24 text-center">
            <h2 class="text-4xl font-bold tech-text-medium mb-4">O Cérebro do Solidarize: A Nossa IA</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-12">Não usamos IA como um recurso isolado, mas como o motor da nossa plataforma. Explore os diferentes tipos de IA que empregamos.</p>
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <div class="border-b border-gray-200 mb-6">
                    <nav class="-mb-px flex justify-center space-x-6">
                        <button class="tab-button active py-4 px-6 font-bold tech-text-medium border-b-2 tech-border-accent" data-tab="llms">🧠 LLMs (Bedrock)</button>
                        <button class="tab-button py-4 px-6 font-bold text-gray-500" data-tab="agents">⚙️ Agentes (Step Functions)</button>
                        <button class="tab-button py-4 px-6 font-bold text-gray-500" data-tab="vision">👁️ Visão (Rekognition)</button>
                    </nav>
                </div>
                <div>
                    <div id="llms" class="tab-content active text-left">
                        <h3 class="text-2xl font-bold tech-text-dark mb-3">Modelos de Linguagem Grandes (LLMs)</h3>
                        <p class="text-gray-700">São o nosso cérebro analítico. Nós usamo-los para ir além das palavras-chave e entender o contexto. Isto permite-nos:</p>
                        <ul class="list-disc list-inside mt-4 space-y-2">
                            <li><strong>Qualificar conexões:</strong> Fazer o "match" entre a habilidade de um voluntário ("sou bom a ouvir") e a necessidade de uma instituição ("companhia para idosos").</li>
                            <li><strong>Transformar feedback em ação:</strong> Analisar o sentimento de uma avaliação e detetar padrões de problemas de forma proativa.</li>
                            <li><strong>Aumentar o engajamento:</strong> Gerar mensagens de reconhecimento personalizadas para motivar os voluntários.</li>
                        </ul>
                    </div>
                    <div id="agents" class="tab-content text-left">
                         <h3 class="text-2xl font-bold tech-text-dark mb-3">Agentes de IA (Orquestração)</h3>
                        <p class="text-gray-700">São os nossos "gerentes" autónomos. Programamo-los para orquestrar tarefas complexas e garantir que a lógica de negócio seja executada de forma proativa.</p>
                         <ul class="list-disc list-inside mt-4 space-y-2">
                            <li><strong>Automatizar a confiança:</strong> O nosso "agente" de onboarding executa todo o processo de verificação de identidade e antecedentes.</li>
                            <li><strong>Centralizar a execução:</strong> Cada agente (Onboarding, Matching, Segurança) tem uma função específica, tornando o sistema organizado e fácil de manter.</li>
                            <li><strong>Garantir a proatividade:</strong> Os agentes agem com base em gatilhos (ex: após uma missão, o agente de avaliação entra em ação), não esperando pela ação do utilizador.</li>
                        </ul>
                    </div>
                    <div id="vision" class="tab-content text-left">
                         <h3 class="text-2xl font-bold tech-text-dark mb-3">Visão Computacional</h3>
                        <p class="text-gray-700">É a nossa primeira e mais importante barreira contra fraudes, estabelecendo a confiança desde o primeiro segundo.</p>
                         <ul class="list-disc list-inside mt-4 space-y-2">
                            <li><strong>Estabelecer a prova de identidade:</strong> Ao usar o AWS Rekognition para comparar a selfie do voluntário com o seu documento, garantimos que a pessoa é quem diz ser.</li>
                            <li><strong>Impacto direto na segurança:</strong> Esta tecnologia tem um impacto direto na segurança das instituições e na confiança de toda a comunidade, eliminando um processo que seria manual, lento e inseguro.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="impacto" class="scroll-mt-24 text-center">
            <h2 class="text-4xl font-bold tech-text-medium mb-4">Impacto Real e Visão de Futuro</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-12">A nossa tecnologia foi construída com um propósito: fortalecer a comunidade. O nosso plano é expandir, cidade a cidade, tornando a solidariedade mais acessível, segura e eficaz para todos.</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-left">
                <div class="bg-white p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold tech-accent mb-2">Para o Voluntário</h3>
                    <p>Uma experiência gratificante, segura e fácil para encontrar formas de ajudar e ser reconhecido pelo seu impacto.</p>
                </div>
                 <div class="bg-white p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold tech-accent mb-2">Para a Instituição</h3>
                    <p>Acesso fiável a uma rede de voluntários qualificados e verificados, simplificando a gestão da ajuda recebida.</p>
                </div>
                 <div class="bg-white p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold tech-accent mb-2">Para a Comunidade</h3>
                    <p>Uma sociedade mais forte e conectada, onde a tecnologia serve como um catalisador para a ação solidária.</p>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Modal for tech explanations -->
    <div id="tech-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4 modal-fade-in">
        <div class="bg-white rounded-lg shadow-2xl p-8 max-w-md w-full modal-slide-in">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-2xl font-bold tech-text-dark"></h3>
                <button id="close-modal-btn" class="text-3xl text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <p id="modal-text" class="text-gray-700"></p>
        </div>
    </div>

    <footer class="tech-bg-dark text-white text-center mt-24 py-10">
        <p class="text-lg font-bold">Solidarize</p>
        <p class="opacity-80">Tecnologia para um mundo melhor.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const startBtn = document.getElementById('start-animation-btn');
            const nodes = document.querySelectorAll('.diagram-node');
            const explanations = document.querySelectorAll('.explanation-box');
            const pulse = document.getElementById('data-pulse');
            const diagramContainer = document.getElementById('diagram-container');
            let animationTimeout;

            const animationSteps = [
                { exp: 'exp-0', activeNodes: [] },
                { from: 'node-user', to: 'node-cloudfront', exp: 'exp-1', activeNodes: ['node-user', 'node-cloudfront'], delay: 1500 },
                { from: 'node-cloudfront', to: 'node-api', exp: 'exp-2', activeNodes: ['node-cloudfront', 'node-api'], delay: 1500 },
                { from: 'node-api', to: 'node-cognito', exp: 'exp-3', activeNodes: ['node-api', 'node-cognito'], delay: 2000 },
                { from: 'node-api', to: 'node-logic-main', exp: 'exp-4', activeNodes: ['node-api', 'node-logic-main', 'node-lambda', 'node-step'], delay: 2000 },
                { from: 'node-logic-main', to: 'node-rekognition', exp: 'exp-5', activeNodes: ['node-logic-main', 'node-rekognition', 'node-bedrock', 'node-event'], delay: 2500 },
                { from: 'node-logic-main', to: 'node-external', exp: 'exp-6', activeNodes: ['node-logic-main', 'node-external', 'node-sns'], delay: 2500 },
                { from: 'node-logic-main', to: 'node-db', exp: 'exp-7', activeNodes: ['node-logic-main', 'node-db'], delay: 2000 },
            ];
            
            const techDescriptions = {
                'node-user': { title: 'Utilizador', text: 'O ponto de partida de toda a interação. É o voluntário ou a instituição a aceder à plataforma através de um browser ou aplicação móvel.' },
                'node-cloudfront': { title: 'Amazon CloudFront', text: 'É a nossa Rede de Distribuição de Conteúdo (CDN). Entrega a interface da aplicação (o site estático) ao utilizador de forma extremamente rápida e segura, a partir de uma localização geograficamente próxima dele.' },
                'node-api': { title: 'Amazon API Gateway', text: 'A porta de entrada segura e escalável para o nosso backend. Gere todas as requisições, direcionando-as para os serviços corretos e aplicando políticas de segurança.' },
                'node-cognito': { title: 'AWS Cognito', text: 'Serviço de identidade que gere a autenticação dos utilizadores. Ele trata do login, registo e garante que apenas utilizadores verificados acedam à plataforma.' },
                'node-lambda': { title: 'AWS Lambda', text: 'Executa o nosso código em resposta a eventos, sem necessidade de gerir servidores. Cada função Lambda realiza uma tarefa específica, como processar um registo ou uma doação.'},
                'node-step': { title: 'AWS Step Functions', text: 'O orquestrador dos nossos fluxos de trabalho. Atua como um "Agente de IA" que coordena sequências complexas de tarefas, como o processo de onboarding de um novo voluntário, chamando várias funções Lambda e serviços de IA na ordem correta.' },
                'node-event': { title: 'Amazon EventBridge', text: 'Serviço de barramento de eventos que usamos para acionar fluxos de trabalho de forma agendada. Por exemplo, executa o "Agente de Matching" todas as noites para encontrar novas conexões.' },
                'node-sns': { title: 'Amazon SNS', text: 'Serviço de notificação que nos permite enviar mensagens (email, SMS, push) para os nossos utilizadores, como um alerta de nova missão ou uma mensagem de agradecimento.'},
                'node-rekognition': { title: 'AWS Rekognition', text: 'O nosso serviço de Visão Computacional. É usado para comparar a selfie do utilizador com a foto do seu documento de identidade, automatizando e garantindo a veracidade da verificação de identidade.' },
                'node-bedrock': { title: 'Amazon Bedrock', text: 'O nosso acesso a Modelos de Linguagem Grandes (LLMs). Utilizamo-lo como o cérebro analítico para interpretar texto, como analisar o sentimento de um feedback, fazer o "match" inteligente entre habilidades e necessidades, e gerar conteúdo personalizado.' },
                'node-external': { title: 'APIs Externas', text: 'Para funcionalidades que requerem dados ou serviços de terceiros, como gateways de pagamento para doações via PIX ou serviços de verificação de antecedentes criminais.' },
                'node-db': { title: 'Amazon DynamoDB & S3', text: 'A nossa solução de persistência de dados. O DynamoDB, uma base de dados NoSQL, armazena os dados da aplicação (perfis, missões), enquanto o Amazon S3 guarda de forma segura os ficheiros enviados pelos utilizadores (fotos, documentos).' },
                'node-logic-main': { title: 'Orquestração (Agentes de IA)', text: 'Esta é a nossa camada de lógica central, onde os fluxos do Step Functions coordenam as funções Lambda e outros serviços para executar as regras de negócio da plataforma de forma automatizada e inteligente.' },
            };
            
            function resetAnimation() {
                if(animationTimeout) clearTimeout(animationTimeout);
                nodes.forEach(n => n.classList.remove('active'));
                pulse.style.opacity = '0';
                explanations.forEach(e => e.classList.remove('active'));
                document.getElementById('exp-0').classList.add('active');
                startBtn.disabled = false;
                startBtn.innerText = '▶ Iniciar Animação';
            }
            
            function runAnimation() {
                resetAnimation();
                startBtn.disabled = true;
                startBtn.innerText = 'Animando...';

                let cumulativeDelay = 0;
                animationSteps.forEach((step, index) => {
                    if (index === 0) {
                        explanations.forEach(e => e.classList.remove('active'));
                        document.getElementById(step.exp)?.classList.add('active');
                        return;
                    };
                    
                    cumulativeDelay += step.delay;
                    animationTimeout = setTimeout(() => {
                        nodes.forEach(n => n.classList.remove('active'));
                        step.activeNodes.forEach(id => document.getElementById(id)?.classList.add('active'));

                        if (step.from && step.to) {
                            const fromNode = document.getElementById(step.from);
                            const toNode = document.getElementById(step.to);
                            const containerRect = diagramContainer.getBoundingClientRect();
                            const fromRect = fromNode.getBoundingClientRect();
                            const toRect = toNode.getBoundingClientRect();

                            const startY = (fromRect.top - containerRect.top) + (fromRect.height / 2) - 8;
                            let startX = (fromRect.left - containerRect.left);
                            let endX = (toRect.left - containerRect.left);
                            
                            if (startX < endX) { // Moving right
                                startX += fromRect.width;
                                endX -= 8; // Offset for pulse size
                            } else { // Moving left
                                 startX -= 8; // Offset for pulse size
                                 endX += toRect.width;
                            }
                            
                            const endY = (toRect.top - containerRect.top) + (toRect.height / 2) - 8;
                           
                            pulse.style.transition = 'none';
                            pulse.style.left = `${startX}px`;
                            pulse.style.top = `${startY}px`;
                            pulse.style.opacity = '1';

                            setTimeout(() => {
                                pulse.style.transition = 'top 1s ease-in-out, left 1s ease-in-out';
                                pulse.style.left = `${endX}px`;
                                pulse.style.top = `${endY}px`;
                            }, 50);

                            setTimeout(() => {
                                pulse.style.opacity = '0';
                            }, 1050);
                        }
                        
                        explanations.forEach(e => e.classList.remove('active'));
                        document.getElementById(step.exp)?.classList.add('active');

                        if (index === animationSteps.length - 1) {
                           animationTimeout = setTimeout(() => {
                                startBtn.disabled = false;
                                startBtn.innerText = '▶ Reiniciar Animação';
                           }, 2000);
                        }
                    }, cumulativeDelay);
                });
            }

            startBtn.addEventListener('click', runAnimation);
            
            const modal = document.getElementById('tech-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const modalTitle = document.getElementById('modal-title');
            const modalText = document.getElementById('modal-text');

            nodes.forEach(node => {
                node.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const description = techDescriptions[node.id];
                    if (description) {
                        modalTitle.innerText = description.title;
                        modalText.innerText = description.text;
                        modal.classList.remove('hidden');
                    }
                });
            });
            function closeModal() { modal.classList.add('hidden'); }
            closeModalBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('fade-in-section'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('section > div').forEach(section => observer.observe(section));

            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('main > section, header');
            window.addEventListener('scroll', () => {
                let current = 'inicio';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 100) current = section.getAttribute('id');
                });
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === current) link.classList.add('active');
                });
            });

            const tabsContainer = document.querySelector('#ia');
            if (tabsContainer) {
                const tabButtons = tabsContainer.querySelectorAll('.tab-button');
                const tabContents = tabsContainer.querySelectorAll('.tab-content');
                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const tabId = button.dataset.tab;
                        tabButtons.forEach(btn => {
                            btn.classList.remove('active');
                            btn.classList.remove('tech-border-accent');
                            btn.classList.add('text-gray-500');
                        });
                        button.classList.add('active', 'tech-border-accent');
                        button.classList.remove('text-gray-500');
                        tabContents.forEach(content => {
                            content.classList.remove('active');
                            if (content.id === tabId) content.classList.add('active');
                        });
                    });
                });
            }
        });
    </script>
</body>
</html>
